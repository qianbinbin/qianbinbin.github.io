<!doctype html><html lang=zh><meta charset=utf-8><meta name=generator content="Hugo 0.136.2"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><link rel=icon href=/favicons/favicon.svg><title>Gas Station&nbsp;&ndash;&nbsp;Binac</title><link rel=stylesheet href=/css/core.min.d30edcc615d78b7f8a2a9e5f1b66bd074a7ad2e94b579fa5902d0967ce0f7684b300ef3a9e15d41af82c75f3fb951d4b.css integrity=sha384-0w7cxhXXi3+KKp5fG2a9B0p60ulLV5+lkC0JZ84PdoSzAO86nhXUGvgsdfP7lR1L><meta name=twitter:card content="summary">
<meta name=twitter:title content="Gas Station"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=/><img class="site logo" src=/favicons/favicon.svg alt><span class="site name">Binac</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class='nav item active' href=/posts/ title=文章>文章</a>
<a class='nav item' href=/nonsense/ title=妄言>妄言</a>
<a class='nav item' href=/tuya/ title=涂鸦>涂鸦</a>
<a class='nav item' href=/tags/ title>标签</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Gas Station</h1><p class="article date">2017-10-14</p></section><article class="article markdown-body"><p>加油站问题，LeetCode 链接：
<a href=https://leetcode.com/problems/gas-station/description/ target=_blank rel="noopener noreferrer">https://leetcode.com/problems/gas-station/description/</a></p><blockquote><p>There are N gas stations along a circular route, where the amount of gas at station i is gas[i].</p><p>You have a car with an unlimited gas tank and it costs cost[i] of gas to travel from station i to its next station (i+1). You begin the journey with an empty tank at one of the gas stations.</p><p>Return the starting gas station&rsquo;s index if you can travel around the circuit once, otherwise return -1.</p><p>Note:
The solution is guaranteed to be unique.</p></blockquote><p>这道题难度为 Medium，但如果对每个加油站进行模拟，则时间复杂度为 $O(n^2)$，OJ 判定超时，而 $O(n)$ 的方法并不容易。</p><p>Discuss 区有人给出了 $O(n)$ 的方法：
<a href=https://leetcode.com/problems/gas-station/discuss/42568/Share-some-of-my-ideas. target=_blank rel="noopener noreferrer">https://leetcode.com/problems/gas-station/discuss/42568/Share-some-of-my-ideas.</a></p><p>但其中用到的结论并没有证明，而且描述不清晰。下面我会说明这两个结论的正确性。</p><h2 id=两个结论>两个结论</h2><ol><li><strong>如果从 i 点出发，恰好无法到达 j 点（即能到达 j 前一点但无法到达 j 点），则如果从 i ~ j 之间任意一点出发，均无法到达 j 点。</strong></li></ol><p>这个结论很好理解，各个点是构成一个环的，但为方便起见，抽象为如下序列：</p><p>&mldr;, i, i + 1, &mldr;, j - 1, j, &mldr;</p><p>既然从 i 出发可以到达 i + 1 ~ j - 1 所有点，那么到达这些点时剩余的油量一定 $\ge0$；而如果直接从这些点出发，初始油量为 0，就更加无法到达 j 点了。</p><p>这样，我们就可以跳过 i + 1 ~ j - 1 所有点，下次判断时直接从 j 点开始。</p><ol start=2><li><p><strong>如果所有车站的油量总和大于等于所有车站到下一站需要的油量总和，即</strong></p><p>$$\sum_{i=0}^{N-1} gas[i] \ge \sum_{i=0}^{N-1} cost[i]$$</p><p><strong>则问题必有解。</strong></p></li></ol><p>考虑两个点的情形，存在两种情况：</p><ul><li><p>若两点均满足 $gas[i] \ge cost[i]$，显然结论成立</p></li><li><p>若某一点不满足 $gas[i] \ge cost[i]$，不妨设 $gas[0] &lt; cost[0]$，由于$gas[0] + gas[1] \ge cost[0] + cost[1]$，则必有$gas[1] > cost[1]$，那么从 1 点出发可以到达 0 点并回到 1 点，结论仍成立</p></li></ul><p>把 $gas[i] \ge cost[i]$ 的点称为“好点”，其余称为“坏点”（我自己造的词），考虑普遍情形，对 $N$ 个点进行如下操作：</p><ol><li><p>把相邻的好点结合为新的好点，相邻的坏点结合为新的坏点，得到一个好点坏点相间的环</p></li><li><p>把好点和下一个坏点结合，得到 $N&rsquo;$ 个点，由于 $\sum_{i=0}^{N-1} gas[i] \ge \sum_{i=0}^{N-1} cost[i]$，保证了至少有一个好点</p></li></ol><p>不断重复上述操作，最终退化为两个点的情形，且其中至少有一个好点，根据上面对两个点情形的讨论，问题必有解，且构成最终好点的第一个点即为出发点。</p><p>在这个问题中，题目保证了解（如果有的话）是唯一的，那么最终就一定是一个好点和一个坏点。</p><h2 id=解题思路>解题思路</h2><p>在这道题中，我们不需要对每个点模拟一整圈，只要找到第一个点，使得其与之后的点都能结合成为好点即可，这个点就是出发点，因为题中已经保证解是唯一的。一边扫描一边统计邮箱剩余油量和总剩余油量，如果最终总剩余油量 $&lt; 0$，则说明无解，返回 -1。</p><p>这样也不需要对数组越界进行处理。</p><p>只扫描一遍数组，复杂度为 $O(n)$。</p><h2 id=实现源码>实现源码</h2><p><a href=https://github.com/qianbinbin/leetcode target=_blank rel="noopener noreferrer">https://github.com/qianbinbin/leetcode</a></p></article><section class="article labels"><a class=tag href=/tags/leetcode/>LeetCode</a><a class=tag href=/tags/%E7%AE%97%E6%B3%95/>算法</a></section><section class="article license"><p xmlns:cc=http://creativecommons.org/ns# style=text-align:center>本作品根据 <a href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="license noopener noreferrer" style=display:inline-block>署名-非商业性使用-相同方式共享 4.0 国际许可<img style=height:15px!important;margin-left:1px;vertical-align:text-bottom src=/cc-icons/cc.svg><img style=height:15px!important;margin-left:1px;vertical-align:text-bottom src=/cc-icons/by.svg><img style=height:15px!important;margin-left:1px;vertical-align:text-bottom src=/cc-icons/nc.svg><img style=height:15px!important;margin-left:1px;vertical-align:text-bottom src=/cc-icons/sa.svg></a> 进行授权。</p></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=/posts/single-number-ii/><span class="iconfont icon-article"></span>Single Number II</a></p><p><a class=link href=/posts/virtual-key-statusbar-lockscreen-disabled/><span class="iconfont icon-article"></span>分析和解决手机重启若干次后，虚拟按键、状态栏等失效的问题</a></p></section><section class="article discussion"><script>function loadComment(){let e=document.createElement("script");e.src="https://utteranc.es/client.js",e.setAttribute("repo","qianbinbin/qianbinbin.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("theme","preferred-color-scheme"),e.setAttribute("crossorigin","anonymous"),e.setAttribute("async",""),document.querySelector("section.article.discussion").innerHTML="",document.querySelector("section.article.discussion").appendChild(e)}loadComment(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{loadComment()})</script></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>© 2017-2024 Binac.</p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css integrity=sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js integrity=sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-N7VZY53PLB"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-N7VZY53PLB")}</script><script src=https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js></script><script>addBackToTop({diameter:42})</script></body></html>